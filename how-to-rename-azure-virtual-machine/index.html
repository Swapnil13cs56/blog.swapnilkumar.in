<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>how to rename azure virtual machine - swapnilkumar.in</title><meta name="description" content="How to rename Azure Virtual MachineRenaming a virtual machine on Azure is not straight forward as like renaming a folder or file on your local PC. Also there is no&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://swapnilkumar.in/how-to-rename-azure-virtual-machine/"><link rel="alternate" type="application/atom+xml" href="https://swapnilkumar.in/feed.xml"><link rel="alternate" type="application/json" href="https://swapnilkumar.in/feed.json"><meta property="og:title" content="how to rename azure virtual machine"><meta property="og:image" content="https://swapnilkumar.in/media/website/logo.png"><meta property="og:site_name" content="swapnilkumar.in"><meta property="og:description" content="How to rename Azure Virtual MachineRenaming a virtual machine on Azure is not straight forward as like renaming a folder or file on your local PC. Also there is no&hellip;"><meta property="og:url" content="https://swapnilkumar.in/how-to-rename-azure-virtual-machine/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://swapnilkumar.in/media/website/favicon-32x32.png" type="image/png"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://swapnilkumar.in/assets/css/style.css?v=18a530a4129703391f6aeb6ecc6de3d3"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://swapnilkumar.in/how-to-rename-azure-virtual-machine/"},"headline":"how to rename azure virtual machine","datePublished":"2020-07-11T22:18","dateModified":"2020-07-15T08:55","image":{"@type":"ImageObject","url":"https://swapnilkumar.in/media/website/logo.png","height":192,"width":192},"description":"How to rename Azure Virtual MachineRenaming a virtual machine on Azure is not straight forward as like renaming a folder or file on your local PC. Also there is no&hellip;","author":{"@type":"Person","name":"Swapnil Kumar"},"publisher":{"@type":"Organization","name":"Swapnil Kumar","logo":{"@type":"ImageObject","url":"https://swapnilkumar.in/media/website/logo.png","height":192,"width":192}}}</script><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"><script data-ad-client="ca-pub-2493796679704543" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript">docsearch({
apiKey: '2628a113bcede076e10970f336d037d6',
indexName: 'swapnilkumar',
inputSelector: '#docsearch',
debug: false // Set debug to true if you want to inspect the dropdown
});</script><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://swapnilkumar.in/"><img src="https://swapnilkumar.in/media/website/logo.png" alt="swapnilkumar.in"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://swapnilkumar.in/index.html" target="_self">home</a></li><li class="active-parent has-submenu"><span class="is-separator" aria-haspopup="true">devOps</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://swapnilkumar.in/devops/" target="_self">what is devOps</a></li><li><a href="https://swapnilkumar.in/devops-part-2/" target="_self">what is devOps (Continue...)</a></li><li class="active"><a href="https://swapnilkumar.in/how-to-rename-azure-virtual-machine/" target="_self">how to rename an Azure Virtual Machine</a></li><li><a href="https://swapnilkumar.in/attaching-sql-agent-with-the-azure-virtual-machine/" target="_self">how to attach the sql agent on azure sql virtual machine</a></li></ul></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">medium</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://swapnilkumar.in/parallel-love/" target="_self">parallel love</a></li></ul></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Testing</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://swapnilkumar.in/software-testing/" target="_self">Software Testing</a></li></ul></li><li><a href="https://swapnilkumar.in/who-am-i/" target="_self">who am i</a></li><li><a href="https://swapnilkumar.in/my-poems/" target="_self">poems i wrote</a></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="https://swapnilkumar.in/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="search..." aria-label="search..." autofocus="autofocus"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://swapnilkumar.in/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><h1>how to rename azure virtual machine</h1></div></header></div><div class="wrapper post__entry"><h2 class="align-left">How to rename Azure Virtual Machine</h2><hr><p>Renaming a virtual machine on Azure is not straight forward as like renaming a folder or file on your local PC. Also there is no manual process or rename operation that can be used on the<strong> <a href="https://portal.azure.com">Azure portal</a></strong> to rename a Virtual machine as well. So do we have anything that we can do to rename our Virtual Machine or not?</p><p>Yes we do have, we can perform the renaming of virtual machines using powershell script. You just need to make sure to run the script one by one just to make sure not make any mistake as the rename operation actually performs deletion and creation of the virtual machine with old configuration and a new name.</p><p>There are a points which needs to be kept in mind while performing this operation of renaming, those are listed below:</p><ol><li>Replication will then be required to be re-initiated due to name change</li><li>Backup also is then required to be re-initiated </li><li>Management configuration requires a revisit (when i tried on my virtual machine, the auto shutdown property was removed)</li><li>Make sure to detach any<strong> data disks</strong> before performing the rename (not the OS disk)</li><li>If you have configured the Dashboard with that virtual machine tiles on it, due to name change the dashboard will then required a revisit, since now you will see "No data available" for the old VM</li></ol><p>So before proceeding lets deal with the <strong>Pre-requisites:</strong></p><ul><li>An Azure subscription. </li><li>Az Azure Virtual machine on which rename is to be performed</li><li>Windows PowerShell 5.1 or later, you can download from <a href="https://github.com/PowerShell/PowerShell/releases">here</a></li><li>The <a data-sf-ec-immutable="" href="https://docs.microsoft.com/en-us/powershell/azure/install-az-ps">Az PowerShell</a> module.</li><li>A script editor of your choice. I am using Notepad++, can be downloaded from <a href="https://notepad-plus-plus.org/downloads/" target="_blank" rel="noopener noreferrer">here</a>, but you can use any of your choice.</li></ul><p>We will be actully doing three major operations, <strong>Backing up the Old VM configurations</strong>, <strong>Deleting</strong> it and Finally <strong>creating</strong> the New Virtual Machine with <strong>old configuration and new name</strong>.</p><p>Before going with the steps below you need to connect to your Azure account and required subscription</p><p>Check <a href="https://docs.microsoft.com/en-us/powershell/azure/authenticate-azureps?ranMID=24542&amp;ranEAID=je6NUbpObpQ&amp;ranSiteID=je6NUbpObpQ-Vz6W5PrfRAFIGZZk9XwTSg&amp;epi=je6NUbpObpQ-Vz6W5PrfRAFIGZZk9XwTSg&amp;irgwc=1&amp;OCID=AID2000142_aff_7593_1243925&amp;tduid=(ir__keeonw1orkkftzcs0h20wk909m2xiw0mp0cuh2yz00)(7593)(1243925)(je6NUbpObpQ-Vz6W5PrfRAFIGZZk9XwTSg)()&amp;irclickid=_keeonw1orkkftzcs0h20wk909m2xiw0mp0cuh2yz00&amp;view=azps-4.3.0">Sign in with Azure PowerShell</a>, when connected in the required subscription you can check your VMs using the <strong>Get-AzVM</strong> command and now perform the below steps</p><p>1. <strong>Backing</strong> up the OLD VM</p><p> Using your script editor, create a powershell script and enter the below script</p><p># Resource Group Name<br>$ResourceGroupName = 'your_resource_group_name'<br><br># Virtual Machine Name<br>$VirtualMachineName = 'your_virtual_machine_name_which_needs_to_be_renamed'<br><br>Then, this next command will <strong>export the Azure VM properties to an XML file</strong>. Save it somewhere on your computer that you can find later on. The code below saves the VM settings to C:\Demo\Backup.xml*.<br><br># Export VM properties<br>Get-AzVM -ResourceGroupName $ResourceGroupName -Name $VirtualMachineName | Export-Clixml C:\Demo\VM_Backup.xml -Depth 5<br><br>Now you have a backup of the original VM properties that you can use as a reference when needed. Use the command below to import the backup XML file into a variable named $oldVM.<br><br># Import VM settings from backup XML and store it in a variable<br>$oldVM = Import-Clixml C:\Demo\VM_Backup.xml</p><p>2. <strong>Deleting</strong> the Virtual Machine</p><p>Since by now you have the Configuration backup with you, now we can delete the Virtual Machine</p><p># Delete the Old VM<br>Remove-AzVM -ResourceGroupName $oldVM.ResourceGroupName -Name $oldVM.Name</p><p>You might be asking “what about the other resources which were connected to the virtual machine that was deleted?”. No need to worry, those resources are left unchanged.<br><br>The previous command only deletes the virtual machine. You can confirm by looking for those connected resources in the Azure portal under the resource group.</p><p>3. Creating the New Virtual Machine with new name</p><p># Set the name of the new virtual machine<br>$newVMName = 'demo-mail2'<br><br># Initiate a new virtual machine configuration<br>$newVM = New-AzVMConfig -VMName $newVMName -VMSize $oldVM.HardwareProfile.VmSize -Tags $oldVM.Tags<br><br>Next, attach the OS Disk that was previously attached to the old virtual machine to the new one. Use the code below to do that.<br><br># Attach the OS Disk of the old VM to the new VM<br>Set-AzVMOSDisk -VM $newVM -CreateOption Attach -ManagedDiskId $oldVM.StorageProfile.OsDisk.ManagedDisk.Id -Name $oldVM.StorageProfile.OsDisk.Name -Windows<br><br>Now, attach the network interface using this next line of code.<br><br># Attach all NICs of the old VM to the new VM<br>$oldVM.NetworkProfile.NetworkInterfaces | % {Add-AzVMNetworkInterface -VM $newVM -Id $_.Id}<br><br>And finally, attach any data disks that were present in the old VM.<br><br># Attach all Data Disks (if any) of the old VM to the new VM<br>$oldVM.StorageProfile.DataDisks | % {Add-AzVMDataDisk -VM $newVM -Name $_.Name -ManagedDiskId $_.ManagedDisk.Id -Caching $_.Caching -Lun $_.Lun -DiskSizeInGB $_.DiskSizeGB -CreateOption Attach}<br><br>At this point, the new virtual machine specs are packaged in the configuration stored in the $newVM variable. Using this next code snippet will trigger the creation of the new virtual machine.<br><br># Create the new virtual machine<br>New-AzVM -ResourceGroupName $ResourceGroupName -Location $oldVM.Location -VM $newVM</p><p>The creation may take a few minutes to complete.</p><p>For more, you can refer to this <a href="https://www.whatsupgold.com/blog/how-to-rename-an-azure-vm-using-powershell-a-step-by-step-guide" target="_blank" rel="noopener noreferrer">article</a></p><p><script data-ad-client="ca-pub-2493796679704543" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></p><p><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></p><p><ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-2493796679704543" data-ad-slot="9179553772" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></p></div></article></main><footer class="footer"><div class="footer__social"><a href="https://facebook.com/swapnil.lazybone" aria-label="Facebook"><svg><use xlink:href="https://swapnilkumar.in/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://www.instagram.com/soup_lazy/" aria-label="Instagram"><svg><use xlink:href="https://swapnilkumar.in/assets/svg/svg-map.svg#instagram"/></svg> </a><a href="https://www.linkedin.com/in/swapnilkr/" aria-label="LinkedIn"><svg><use xlink:href="https://swapnilkumar.in/assets/svg/svg-map.svg#linkedin"/></svg></a></div><div class="footer__copyright"><p>made with love</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://swapnilkumar.in/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://swapnilkumar.in/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>